"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const sdkmanager_common_1=require("@ohos/sdkmanager-common"),ComponentConstants_1=require("../const/ComponentConstants"),sdkmanager_common_2=require("@ohos/sdkmanager-common"),sdkmanager_common_3=require("@ohos/sdkmanager-common");class HosLocalComponentLoader extends sdkmanager_common_3.AbstractLocalComponentLoader{constructor(o){super(HosLocalComponentLoader.MAX_SCAN_DEPTH,o)}getUniPackageName(){return HosLocalComponentLoader.UNI_PACKAGE_NAME}configMeta(o,n){var e;const t=new sdkmanager_common_1.MetaDto,a=null===(e=o.meta)||void 0===e?void 0:e.metaVersion;return(0,sdkmanager_common_2.isEmpty)(a)?ComponentConstants_1.LEGACY_VERSIONS.includes(n.version)?(t.metaVersion=ComponentConstants_1.VERSION_1_0_0,void(n.meta=t)):(t.metaVersion=ComponentConstants_1.VERSION_2_0_0,void(n.meta=t)):(t.metaVersion=a,void(n.meta=t))}addToMap(o,n){if(super.addToMap(o,n),sdkmanager_common_1.ComponentPath.TOOLCHAINS===n.getPath()&&ComponentConstants_1.TOOLCHAINS_6_VERSION===n.getVersion()){const e=JSON.parse(JSON.stringify(n));e.apiVersion=4,super.addToMap(o,e);const t=JSON.parse(JSON.stringify(n));t.apiVersion=5,super.addToMap(o,t)}}convertComponent(o){const n=super.convertComponent(o);return sdkmanager_common_1.ComponentPath.TOOLCHAINS===n.getPath()&&(ComponentConstants_1.TOOLCHAINS_7_VERSION===n.getVersion()&&(n.apiVersion=7),ComponentConstants_1.TOOLCHAINS_6_VERSION===n.getVersion()&&(n.apiVersion=6),n.location=this.getLocation(n,this.sdkRoot)),n}isComponentInRightPlace(o,n){const e=super.isComponentInRightPlace(o,n);return sdkmanager_common_1.ComponentPath.TOOLCHAINS!==o.getPath()?e:!(!e||!(HosLocalComponentLoader.TOOLCHAINS_SET.includes(o.getVersion())||(0,sdkmanager_common_1.compareVersion)("3.1.0.0",o.getVersion())<=0))}}exports.default=HosLocalComponentLoader,HosLocalComponentLoader.MAX_SCAN_DEPTH=5,HosLocalComponentLoader.UNI_PACKAGE_NAME="uni-package.json",HosLocalComponentLoader.TOOLCHAINS_SET=[ComponentConstants_1.TOOLCHAINS_7_VERSION,ComponentConstants_1.TOOLCHAINS_6_VERSION];