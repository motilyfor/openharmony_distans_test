"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.configuration=void 0;const path_1=__importDefault(require("path")),hvigor_base_1=require("@ohos/hvigor-base"),hvigor_base_2=require("@ohos/hvigor-base"),task_tree_js_1=require("@ohos/hvigor-base/src/internal/task/build/task-tree.js");function configuration(e){const o=hvigor_base_1.hvigor.getProject();for(const e of o.getAllSubModules()){const o=e.getBuildFilePath();configNodeTask(e),evaluateNodeVigorFile(e,o)}const i=path_1.default.resolve(e.cwd,hvigor_base_1.HvigorCommonConst.BUILD_FILE_NAME);return configNodeTask(o),evaluateNodeVigorFile(o,i),o}function configNodeTask(e){e.registry(new hvigor_base_2.Tasks(e)),e.registry(new task_tree_js_1.TaskTree(e))}function evaluateNodeVigorFile(e,o){const i=require(o);if("function"==typeof i){const o=i(e);e.bindPlugin(o)}else i instanceof hvigor_base_1.HvigorPlugin||Object.keys(i).forEach((o=>{const t=i[o];t instanceof hvigor_base_1.HvigorPlugin&&e.bindPlugin(t)}))}exports.configuration=configuration;