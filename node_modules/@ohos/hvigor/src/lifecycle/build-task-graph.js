"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildTaskGraph=void 0;const hvigor_base_1=require("@ohos/hvigor-base"),_log=hvigor_base_1.HvigorLogger.getLogger("hvigor-build-task-graph");function buildTaskGraph(e){function s(e,s){e.forEach((e=>{const a=e.getNode().getName(),o=e.getName(),t=e.getPath();for(const r of e.getDependsOn()){const e=(0,hvigor_base_1.getModuleFromTaskPath)(r);if(void 0===e){const e=`Can not find the node '${r}' in '${a}:${o}'`;_log.errorMessageExit(e)}const g=(0,hvigor_base_1.getTaskNameFromTaskPath)(r);if(!e.getTaskContainer().hasTask(g)){const s=`'${o}' in ${a} missing depends task '${g}' in ${e.getName()}`;_log.errorMessageExit(s)}if(s.addEdge(t,r),!hvigor_base_1.projectTaskDag.addEdge(t,r)){const e=`Circular dependency between the following tasks:${t}->${r}`;_log.errorMessageExit(e)}}}))}e.getSubModules().forEach((e=>{s(e.getTaskContainer().getAllTasks(),e.getTaskGraph())})),s(e.getTaskContainer().getAllTasks(),e.getTaskGraph())}exports.buildTaskGraph=buildTaskGraph;