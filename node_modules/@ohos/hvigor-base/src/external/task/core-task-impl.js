"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoreTaskImpl=void 0;const task_js_1=require("./task.js"),noop_js_1=require("../../util/noop.js"),task_path_util_js_1=require("../../internal/task/util/task-path-util.js"),hvigor_log_js_1=require("../../log/hvigor-log.js"),class_identify_util_js_1=require("../../util/class-identify-util.js"),class_type_const_js_1=require("../../options/class-type-const.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-core-task");class CoreTaskImpl extends task_js_1.Task{constructor(e,t){super(),this.dependsTask=[],this.fn=noop_js_1.noop,this.executed=!1,this.node=e;const s=Object.assign({name:"default",group:task_js_1.Task.OTHER_TASK_GROUP,isEnabled:!0},t);this.name=s.name,this.group=s.group,this.isEnabled=s.isEnabled,this.description=s.description,this.path=CoreTaskImpl.createTaskPath(this.node,this.name)}execute(){this.getAction()(),this.executed=!0}getExecuted(){return this.executed}setDependsOn(...e){return this.dependsTask=e.map((e=>CoreTaskImpl.createTaskPath(this.node,e))),this}getDependsOn(){return this.dependsTask}addDependsOn(e){return this.dependsTask.push(CoreTaskImpl.createTaskPath(this.node,e)),this}dependsOn(e,t){let s,i;return s=e instanceof task_js_1.Task?e.getName():e,i=void 0===t?this.node:"string"==typeof t?this.node.findModuleByName(t):t,this.dependsTask.push(CoreTaskImpl.createTaskPath(i,s)),this}getAction(){return this.fn}getNode(){return this.node}getName(){return this.name}getPath(){return this.path}getEnabled(){return this.isEnabled}setEnabled(e){return this.isEnabled=e,this}setDescription(e){return this.description=e,this}getDescription(){return this.description}getGroup(){return this.group}setGroup(e){return this.group=e,this}static createTaskPath(e,t){let s="";return(0,class_identify_util_js_1.instanceOf)(e,class_type_const_js_1.ClassTypeConst.HVIGOR_PROJECT)||(s=e.getName(),""===s&&_log.errorMessageExit("Error module name,can not be empty string!")),(0,task_path_util_js_1.union)(s,t)}}exports.CoreTaskImpl=CoreTaskImpl;