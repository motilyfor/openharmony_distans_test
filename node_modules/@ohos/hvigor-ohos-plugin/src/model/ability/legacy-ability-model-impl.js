"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyAbilityModelImpl=void 0;const project_file_reader_js_1=require("../../utils/project-file-reader.js"),ability_type_enum_js_1=require("../../enum/ability-type-enum.js"),ohos_logger_js_1=require("../../utils/log/ohos-logger.js");class LegacyAbilityModelImpl{constructor(e,i){this._log=ohos_logger_js_1.OhosLogger.getLogger(LegacyAbilityModelImpl.name),this._configObj=project_file_reader_js_1.ProjectFileReader.getJson5Obj(e),this._configFile=e,this._abilityName=i,this._abilityObj=this.findAbilityByName(),this._jsObj=this.findJsByName()}findJsByName(){if(!this._abilityObj||!this.hasJsObj())return;const e=this._configObj.module.js;for(let i=0;i<e.length;i++)if(e[i].name===this._abilityName)return e[i];this._log._buildError("Ability of type PAGE requires the js component of the same name.")._solution(`Check config.json for js component whose name is ${this._abilityName}`)._file(this._configFile)._printErrorAndExit()}hasJsObj(){return this.getType()===ability_type_enum_js_1.AbilityTypeEnum.PAGE}findAbilityByName(){const e=this._configObj.module.abilities;for(let i=0;i<e.length;i++)if(e[i].name===this._abilityName)return e[i];throw this._log._buildError(`${this._abilityName} does not exist in config.json.`)._file(this._configFile)._printErrorAndExit(),new Error("Internal error.")}getRelateSrcPath(){const e=this._abilityObj.srcPath;return void 0===e?this.getName():e}getName(){return this._abilityName}getSrcLanguage(){return this._abilityObj.srcLanguage}getType(){return ability_type_enum_js_1.AbilityTypeEnum.valueOf(this._abilityObj)}getConfigJsonJsObj(){return this._jsObj}}exports.LegacyAbilityModelImpl=LegacyAbilityModelImpl;