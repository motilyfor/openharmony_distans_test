"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergeResource=void 0;const fs_1=__importDefault(require("fs")),os_1=__importDefault(require("os")),file_util_js_1=require("../utils/file-util.js"),ohos_hap_task_js_1=require("./task/ohos-hap-task.js"),pre_build_js_1=require("./pre-build.js"),task_names_js_1=require("./common/task-names.js");var Task=task_names_js_1.TaskNames.Task;class MergeResource extends ohos_hap_task_js_1.OhosHapTask{constructor(e){super(e,Task.MERGE_RESOURCE)}initTaskDepends(){this.module.registryDependsOnTask(this,new pre_build_js_1.PreBuild(this.service))}doTaskAction(e){const s=this.service.getModuleModel();if(!s.getModuleType())return;const t=e.getPathInfo(),r=t.getIntermediatesMergeRes(),i=t.getIntermediatesMergeFile();file_util_js_1.FileUtil.checkDirWithoutDelete(r),file_util_js_1.FileUtil.checkFile(i),fs_1.default.writeFileSync(i,`"${s.getSourceSetByTargetName(e.getTargetName()).getSourceSetRoot()}"${os_1.default.EOL}`)}}exports.MergeResource=MergeResource;