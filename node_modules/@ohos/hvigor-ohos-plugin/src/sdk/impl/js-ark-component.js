"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsArkComponent=void 0;const node_command_builder_js_1=require("../../builder/node-command-builder.js"),process_utils_js_1=require("../../utils/process-utils.js"),path_1=__importDefault(require("path")),fs_extra_1=__importDefault(require("fs-extra")),ohos_logger_1=require("../../utils/log/ohos-logger");class JsArkComponent{constructor(t){this._log=ohos_logger_1.OhosLogger.getLogger(JsArkComponent.name),this.ts2abcVersion="",this.ts2abcToolPath=path_1.default.resolve(t,"bin","ark","ts2abc.js")}getArkVersion(){return this.initArkVersion()}initArkVersion(){if(""!==this.ts2abcVersion)return this.ts2abcVersion;if(!this.ts2abcToolPath||!fs_extra_1.default.existsSync(this.ts2abcToolPath))return this._log.warn("No ark tools found. Can not get ark version."),"";const t=(new node_command_builder_js_1.NodeCommandBuilder).addJsPath(this.ts2abcToolPath).getTsVersion();return this._log.debug(t.build()),this.ts2abcVersion=(new process_utils_js_1.ProcessUtils).executeSync(t.build(),{stdout:"pipe"}).stdout.toString(),this.ts2abcVersion}}exports.JsArkComponent=JsArkComponent;